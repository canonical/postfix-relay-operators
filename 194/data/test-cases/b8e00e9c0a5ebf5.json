{"uid":"b8e00e9c0a5ebf5","name":"test_metrics_configured","fullName":"tests.integration.test_charm#test_metrics_configured","historyId":"152a9f83a66669444522bb07181a4d2f","time":{"start":1761295733331,"stop":1761295733513,"duration":182},"description":"\n    arrange: Deploy postfix-relay.\n    act: Get the metrics from the unit.\n    assert: The metrics can be scraped and there are metrics.\n    ","descriptionHtml":"<pre><code>arrange: Deploy postfix-relay.\nact: Get the metrics from the unit.\nassert: The metrics can be scraped and there are metrics.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"juju","time":{"start":1761295568027,"stop":1761295568306,"duration":279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"machine_ip_address","time":{"start":1761295568306,"stop":1761295568307,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761295568307,"stop":1761295568308,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"postfix_relay_charm","time":{"start":1761295568308,"stop":1761295568308,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"postfix_relay_app","time":{"start":1761295568308,"stop":1761295720683,"duration":152375},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761295733331,"stop":1761295733331,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    arrange: Deploy postfix-relay.\n    act: Get the metrics from the unit.\n    assert: The metrics can be scraped and there are metrics.\n    ","status":"passed","steps":[],"attachments":[{"uid":"99d3f72065b67cc8","name":"log","source":"99d3f72065b67cc8.txt","type":"text/plain","size":96}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761295733513,"stop":1761295733513,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1761295733514,"stop":1761295733514,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_charm"},{"name":"host","value":"github-runner"},{"name":"thread","value":"13799-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_charm"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"e70df383a9fc0646","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":3,"unknown":0,"total":7},"items":[{"uid":"7f47e0e93969ae9b","reportUrl":"../193//#testresult/7f47e0e93969ae9b","status":"failed","statusDetails":"AssertionError: assert 'cpu_usage_idle' in '# HELP conntrack_ip_conntrack_count Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_count untyped\\nconntrack_ip_conntrack_count{host=\"juju-8c3e07-0\"} 0\\n# HELP conntrack_ip_conntrack_max Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_max untyped\\nconntrack_ip_conntrack_max{host=\"juju-8c3e07-0\"} 262144\\n# HELP exec Telegraf collected metric\\n# TYPE exec untyped\\nexec{host=\"juju-8c3e07-0\"} 4640\\n# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.\\n# TYPE go_gc_duration_seconds summary\\ngo_gc_duration_seconds{quantile=\"0\"} 2.8932e-05\\ngo_gc_duration_seconds{quantile=\"0.25\"} 2.8932e-05\\ngo_gc_duration_seconds{quantile=\"0.5\"} 4.9785e-05\\ngo_gc_duration_seconds{quantile=\"0.75\"} 4.9785e-05\\ngo_gc_duration_seconds{quantile=\"1\"} 4.9785e-05\\ngo_gc_duration_seconds_sum 7.8717e-05\\ngo_gc_duration_seconds_count 2\\n# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent.\\n# TYPE go_gc_gogc_percent gauge\\ngo_gc_gogc_percent 100\\n# HELP go_gc_gomeml...ter -w\",host=\"juju-8c3e07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 267\\n# HELP procstat_num_threads Telegraf collected metric\\n# TYPE procstat_num_threads untyped\\nprocstat_num_threads{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-8c3e07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_pid Telegraf collected metric\\n# TYPE procstat_pid untyped\\nprocstat_pid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-8c3e07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 6747\\n# HELP procstat_ppid Telegraf collected metric\\n# TYPE procstat_ppid untyped\\nprocstat_ppid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-8c3e07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_voluntary_context_switches Telegraf collected metric\\n# TYPE procstat_voluntary_context_switches untyped\\nprocstat_voluntary_context_switches{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-8c3e07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 7\\n'","time":{"start":1761295394075,"stop":1761295394272,"duration":197}},{"uid":"26493acba38b5863","reportUrl":"../192//#testresult/26493acba38b5863","status":"passed","time":{"start":1761295319141,"stop":1761295319329,"duration":188}},{"uid":"aa92d86a65401e81","reportUrl":"../191//#testresult/aa92d86a65401e81","status":"failed","statusDetails":"AssertionError: assert 'cpu_usage_idle' in '# HELP conntrack_ip_conntrack_count Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_count untyped\\nconntrack_ip_conntrack_count{host=\"juju-dc5f07-0\"} 0\\n# HELP conntrack_ip_conntrack_max Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_max untyped\\nconntrack_ip_conntrack_max{host=\"juju-dc5f07-0\"} 262144\\n# HELP exec Telegraf collected metric\\n# TYPE exec untyped\\nexec{host=\"juju-dc5f07-0\"} 4512\\n# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.\\n# TYPE go_gc_duration_seconds summary\\ngo_gc_duration_seconds{quantile=\"0\"} 2.5358e-05\\ngo_gc_duration_seconds{quantile=\"0.25\"} 2.5358e-05\\ngo_gc_duration_seconds{quantile=\"0.5\"} 0.001010545\\ngo_gc_duration_seconds{quantile=\"0.75\"} 0.001010545\\ngo_gc_duration_seconds{quantile=\"1\"} 0.001010545\\ngo_gc_duration_seconds_sum 0.001035903\\ngo_gc_duration_seconds_count 2\\n# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent.\\n# TYPE go_gc_gogc_percent gauge\\ngo_gc_gogc_percent 100\\n# HELP go_gc_go...ter -w\",host=\"juju-dc5f07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 158\\n# HELP procstat_num_threads Telegraf collected metric\\n# TYPE procstat_num_threads untyped\\nprocstat_num_threads{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-dc5f07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_pid Telegraf collected metric\\n# TYPE procstat_pid untyped\\nprocstat_pid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-dc5f07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 6747\\n# HELP procstat_ppid Telegraf collected metric\\n# TYPE procstat_ppid untyped\\nprocstat_ppid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-dc5f07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_voluntary_context_switches Telegraf collected metric\\n# TYPE procstat_voluntary_context_switches untyped\\nprocstat_voluntary_context_switches{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-dc5f07-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 4\\n'","time":{"start":1761291411988,"stop":1761291412185,"duration":197}},{"uid":"ed5be244fc27d7f3","reportUrl":"../190//#testresult/ed5be244fc27d7f3","status":"failed","statusDetails":"AssertionError: assert 'cpu_usage_idle' in '# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.\\n# TYPE go_gc_duration_seconds summary\\ngo_gc_duration_seconds{quantile=\"0\"} 3.326e-05\\ngo_gc_duration_seconds{quantile=\"0.25\"} 3.326e-05\\ngo_gc_duration_seconds{quantile=\"0.5\"} 0.001821761\\ngo_gc_duration_seconds{quantile=\"0.75\"} 0.001821761\\ngo_gc_duration_seconds{quantile=\"1\"} 0.001821761\\ngo_gc_duration_seconds_sum 0.001855021\\ngo_gc_duration_seconds_count 2\\n# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent.\\n# TYPE go_gc_gogc_percent gauge\\ngo_gc_gogc_percent 100\\n# HELP go_gc_gomemlimit_bytes Go runtime memory limit configured by the user, otherwise math.MaxInt64. This value is set by the GOMEMLIMIT environment variable, and the runtime/debug.SetMemoryLimit function. Sourced from /gc/gomemlimit:bytes.\\n# TYPE go_gc_gomemlimit_bytes gauge\\ngo_gc_gomemlimit_bytes 9.223372036854776e+18\\n# HELP go_goroutines Number of goroutines that currently exist.\\n# TYPE go_goroutines gauge\\ngo_goroutines...d gauge\\nprocesses_dead{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_idle Telegraf collected metric\\n# TYPE processes_idle gauge\\nprocesses_idle{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_paging Telegraf collected metric\\n# TYPE processes_paging gauge\\nprocesses_paging{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_running Telegraf collected metric\\n# TYPE processes_running gauge\\nprocesses_running{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_sleeping Telegraf collected metric\\n# TYPE processes_sleeping gauge\\nprocesses_sleeping{host=\"juju-32cb7e-0\"} 34\\n# HELP processes_stopped Telegraf collected metric\\n# TYPE processes_stopped gauge\\nprocesses_stopped{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_total Telegraf collected metric\\n# TYPE processes_total gauge\\nprocesses_total{host=\"juju-32cb7e-0\"} 34\\n# HELP processes_total_threads Telegraf collected metric\\n# TYPE processes_total_threads gauge\\nprocesses_total_threads{host=\"juju-32cb7e-0\"} 92\\n# HELP processes_unknown Telegraf collected metric\\n# TYPE processes_unknown gauge\\nprocesses_unknown{host=\"juju-32cb7e-0\"} 0\\n# HELP processes_zombies Telegraf collected metric\\n# TYPE processes_zombies gauge\\nprocesses_zombies{host=\"juju-32cb7e-0\"} 0\\n'","time":{"start":1761291400144,"stop":1761291400314,"duration":170}},{"uid":"2258786dc2a52d3c","reportUrl":"../189//#testresult/2258786dc2a52d3c","status":"failed","statusDetails":"AssertionError: assert 'cpu_usage_idle' in '# HELP conntrack_ip_conntrack_count Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_count untyped\\nconntrack_ip_conntrack_count{host=\"juju-d3b6aa-0\"} 0\\n# HELP conntrack_ip_conntrack_max Telegraf collected metric\\n# TYPE conntrack_ip_conntrack_max untyped\\nconntrack_ip_conntrack_max{host=\"juju-d3b6aa-0\"} 262144\\n# HELP exec Telegraf collected metric\\n# TYPE exec untyped\\nexec{host=\"juju-d3b6aa-0\"} 4544\\n# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.\\n# TYPE go_gc_duration_seconds summary\\ngo_gc_duration_seconds{quantile=\"0\"} 4.032e-05\\ngo_gc_duration_seconds{quantile=\"0.25\"} 4.032e-05\\ngo_gc_duration_seconds{quantile=\"0.5\"} 8.644e-05\\ngo_gc_duration_seconds{quantile=\"0.75\"} 8.644e-05\\ngo_gc_duration_seconds{quantile=\"1\"} 8.644e-05\\ngo_gc_duration_seconds_sum 0.00012676\\ngo_gc_duration_seconds_count 2\\n# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent.\\n# TYPE go_gc_gogc_percent gauge\\ngo_gc_gogc_percent 100\\n# HELP go_gc_gomemlimit_...ter -w\",host=\"juju-d3b6aa-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 156\\n# HELP procstat_num_threads Telegraf collected metric\\n# TYPE procstat_num_threads untyped\\nprocstat_num_threads{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-d3b6aa-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_pid Telegraf collected metric\\n# TYPE procstat_pid untyped\\nprocstat_pid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-d3b6aa-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 6746\\n# HELP procstat_ppid Telegraf collected metric\\n# TYPE procstat_ppid untyped\\nprocstat_ppid{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-d3b6aa-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 1\\n# HELP procstat_voluntary_context_switches Telegraf collected metric\\n# TYPE procstat_voluntary_context_switches untyped\\nprocstat_voluntary_context_switches{cmdline=\"/usr/lib/postfix/sbin/master -w\",host=\"juju-d3b6aa-0\",pattern=\"/usr/lib/postfix/sbin/master\",process_name=\"master\",status=\"sleep\",user=\"root\"} 3\\n'","time":{"start":1761283396368,"stop":1761283396571,"duration":203}},{"uid":"7cc9b6f007866a95","reportUrl":"../172//#testresult/7cc9b6f007866a95","status":"passed","time":{"start":1761214205708,"stop":1761214205911,"duration":203}}]},"tags":["abort_on_fail"]},"source":"b8e00e9c0a5ebf5.json","parameterValues":[]}